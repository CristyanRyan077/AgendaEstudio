<Window x:Class="AgendaNovo.MainWindow"
        WindowState="Maximized"
        WindowStartupLocation="CenterScreen"
        SizeToContent="Manual"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:vm="clr-namespace:AgendaNovo"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:hc="https://handyorg.github.io/handycontrol"
        xmlns:controles="clr-namespace:AgendaNovo.Controles"
        xmlns:local="clr-namespace:AgendaNovo.Helpers"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes" xmlns:conv="clr-namespace:AgendaNovo.Converters"
        mc:Ignorable="d"
        x:Name="main"
        xmlns:models="clr-namespace:AgendaNovo.Models"
        MinWidth="800" MinHeight="600"
        d:DataContext="{d:DesignInstance Type=vm:AgendaViewModel}"
        Title="MainWindow">
    <!-- Atalhos globais -->
    <Window.InputBindings>
        <KeyBinding Key="Right" Command="{Binding FindProximoCommand}"/>
        <KeyBinding Key="Left" Command="{Binding FindAnteriorCommand}"/>
    </Window.InputBindings>


    <Window.Resources>
        <!-- Resources -->
        <Style x:Key="ToggleSwitchStyle" TargetType="ToggleButton">
            <Setter Property="Width" Value="48"/>
            <Setter Property="Height" Value="24"/>
            <Setter Property="Background" Value="#CCCCCC"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ToggleButton">
                        <Grid Width="{TemplateBinding Width}" Height="{TemplateBinding Height}">
                            <!-- trilho -->
                            <Border x:Name="Track" CornerRadius="12" Background="{TemplateBinding Background}"/>

                            <!-- grade interna pra posicionar o knob -->
                            <Grid Margin="2">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition/>
                                    <ColumnDefinition/>
                                </Grid.ColumnDefinitions>

                                <!-- knob -->
                                <Border x:Name="Knob"
                                        Grid.Column="0"
                                        Width="20" Height="20"
                                        Background="White"
                                        CornerRadius="10"
                                        HorizontalAlignment="Left"/>
                            </Grid>
                        </Grid>

                        <ControlTemplate.Triggers>
                            <!-- ligado -->
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="Track" Property="Background" Value="#4CAF50"/>
                                <Setter TargetName="Knob" Property="Grid.Column" Value="1"/>
                            </Trigger>

                            <!-- desabilitado -->
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="Track" Property="Opacity" Value="0.5"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        

        <Style x:Key="DotStepButton" TargetType="Button">
            <Setter Property="Width" Value="16"/>
            <Setter Property="Height" Value="16"/>
            <Setter Property="Margin" Value="0"/>
            <Setter Property="Command"
          Value="{Binding DataContext.SetEtapaCommand, RelativeSource={RelativeSource AncestorType=Window}}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Ellipse Stroke="Black" StrokeThickness="1" Fill="{TemplateBinding Tag}"/>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ToolTipService.ShowDuration" Value="4000"/>
        </Style>
        <DropShadowEffect x:Key="DropShadow"
                      BlurRadius="5"
                      ShadowDepth="2"
                      Opacity="0.3" />
    </Window.Resources>
    
    <DockPanel>
        <ToolBarTray DockPanel.Dock="Top">
            <ToolBar Height="73"  Background="White">
                <Button x:Name="btnAgenda" Padding="4" Click="btnAgenda_Click"
                        Height="60" BorderBrush="Black" BorderThickness="1" FontSize="14">
                    <StackPanel>
                        <materialDesign:PackIcon Height="32" Width="55" Kind="BookAdd"/>
                        <TextBlock FontWeight="Bold" Foreground="Blue">Agendar</TextBlock>
                    </StackPanel>
                </Button>
                <Button x:Name="btnClientes" Padding="4" Click="btnClientes_Click"
                        Height="60" Margin="10,0,0,0" BorderBrush="Black" FontSize="14">
                    <StackPanel>
                        <materialDesign:PackIcon Kind="UserAdd" Height="32" Width="55"/>
                        <TextBlock FontWeight="Bold" Foreground="Red">Clientes</TextBlock>
                    </StackPanel>
                </Button>

                <Button Name="btnCalendario" Height="60" Padding="4" Margin="10,0,0,0"
                        BorderBrush="Black" FontSize="14" Click="btnCalendario_Click">
                    <StackPanel>
                        <materialDesign:PackIcon Kind="Calendar" Height="32" Width="69"  />
                        <TextBlock FontWeight="Bold" Foreground="Black">Calendario</TextBlock>
                    </StackPanel>
                </Button>

                <Button x:Name="btnFinanceiro" Height="60" BorderBrush="Black"
                        Margin="10,0,0,0" Click="btnFinanceiro_Click">
                    <StackPanel>
                        <materialDesign:PackIcon Kind="AccountCash" Height="32" Width="60"/>
                        <TextBlock FontWeight="Bold" Foreground="Green">Financeiro</TextBlock>
                    </StackPanel>
                </Button>
                <Button x:Name="btnFotos" Height="60" BorderBrush="Black"
                        Margin="10,0,0,0" Click="btnFotos_Click">
                    <StackPanel>
                        <materialDesign:PackIcon Kind="PhotoCamera" Height="32" Width="45"/>
                        <TextBlock FontWeight="Bold" Foreground="Pink">Entrega</TextBlock>
                    </StackPanel>
                </Button>
                

            </ToolBar>
            
        </ToolBarTray>

        <DockPanel DockPanel.Dock="Top" LastChildFill="False" Margin="8,0,8,4">
            <Border Background="#EEFFFFCC" CornerRadius="8" Padding="8"
          HorizontalAlignment="Right">
                
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                    <TextBlock Text="Buscar:" Margin="0,0,6,0" VerticalAlignment="Center"/>
                    <hc:TextBox Width="220" Text="{Binding FindTermo, UpdateSourceTrigger=PropertyChanged}" hc:InfoElement.Placeholder="Busca por Nome/Telefone">
                        <hc:TextBox.InputBindings>
                            <!-- Enter = Próximo; Shift+Enter = Anterior -->
                            <KeyBinding Key="Enter" Command="{Binding FindProximoCommand}"/>
                        </hc:TextBox.InputBindings>
                    </hc:TextBox>
                    <TextBlock Text="{Binding FindIndiceLabel}" Margin="8,0" VerticalAlignment="Center"/>
                    <Button Content="↑" Command="{Binding FindAnteriorCommand}" Margin="2,0"/>
                    <Button Content="↓" Command="{Binding FindProximoCommand}" Margin="2,0"/>
                    <Button Content="✕" Command="{Binding FindLimparCommand}" Margin="6,0,0,0"/>
                </StackPanel>
                
            </Border>
            <StackPanel Margin="10,0,0,0" Orientation="Vertical">
                <TextBlock Text="Ver Fotos"/>
                <ToggleButton Style="{StaticResource ToggleSwitchStyle}"
                IsChecked="{Binding ModoFotos}"/>
            </StackPanel>
        </DockPanel>




        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <Grid>
                <Grid.Background>
                    <ImageBrush ImageSource="/Imagens/download.jpeg"/>
                </Grid.Background>

                <Grid HorizontalAlignment="Center" Margin="10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <FrameworkElement x:Name="SegProxy" Tag="{Binding DiaChkSeg}" Visibility="Collapsed"/>
                    <FrameworkElement x:Name="TerProxy" Tag="{Binding DiaChkTer}" Visibility="Collapsed"/>
                    <FrameworkElement x:Name="QuaProxy" Tag="{Binding DiaChkQua}" Visibility="Collapsed"/>
                    <FrameworkElement x:Name="QuiProxy" Tag="{Binding DiaChkQui}" Visibility="Collapsed"/>
                    <FrameworkElement x:Name="SexProxy" Tag="{Binding DiaChkSex}" Visibility="Collapsed"/>
                    <FrameworkElement x:Name="SabProxy" Tag="{Binding DiaChkSab}" Visibility="Collapsed"/>
                    <FrameworkElement x:Name="DomProxy" Tag="{Binding DiaChkDom}" Visibility="Collapsed"/>

                    <Grid Margin="0,8" Background="#55FFFFFF" Grid.Column="1" Effect="{StaticResource DropShadow}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <hc:DatePicker SelectedDate="{Binding DataFiltroSelecionada, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                    DisplayDateStart="2020-01-01" Grid.Column="1" hc:InfoElement.Placeholder="Ir para data:"
                                    Width="150"/>

                        <Button Content="← Semana Anterior" Grid.Row="1"
                                      Command="{Binding SemanaAnteriorCommand}"
                                      FontWeight="Bold"
                                      Grid.Column="0"
                                      FontSize="12"
                                      Background="#FFDDDD"
                                      BorderBrush="Black"
                                      Margin="0,0"
                                      Padding="2,4"/>

                        <TextBlock Text="{Binding SemanaExibida, StringFormat='Semana {0}'}"
                                     VerticalAlignment="Center" Grid.Row="1"
                                     FontSize="16" Grid.Column="1"
                                     FontWeight="Bold"
                                     Margin="10,0"
                                     Foreground="Black"
                                     FontFamily="Segoe UI Black"/>

                        <Button Content="Próxima Semana →" Grid.Row="1"
                                      Command="{Binding ProximaSemanaCommand}"
                                      FontWeight="Bold"
                                      FontSize="14" Grid.Column="2"
                                      Background="#DDFFDD"
                                      BorderBrush="Black"
                                      Margin="0,0"
                                      Padding="8,4"/>

                    </Grid>
                    <!-- SEGUNDA -->
                    <Grid Grid.Row="1" Grid.Column="0">
                        <TextBlock Text="Segunda"
                                               FontSize="20"
                                               FontWeight="Bold"
                                               Foreground="Black"
                                               HorizontalAlignment="Center"
                                               Width="152" Height="32"
                                               Background="#FF13FF00"
                                               TextAlignment="Center"
                                               FontFamily="Segoe UI Black" VerticalAlignment="Top"
                                                />

                        <Border HorizontalAlignment="Stretch" MinWidth="430" Margin="5,30,4,14">
                            <Border.Style>
                                <Style TargetType="Border">
                                    <Setter Property="BorderThickness" Value="0"/>
                                    <Setter Property="BorderBrush" Value="Transparent"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Tag, ElementName=SegProxy}" Value="True">
                                            <Setter Property="BorderBrush" Value="Red"/>
                                            <Setter Property="BorderThickness" Value="3"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Border.Style>

                            <hc:Card Background="#88FFFFFF" HorizontalAlignment="Stretch" Opacity="1.0">
                                <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto" Height="380">
                                    <ItemsControl x:Name="ItemsSegunda" ItemsSource="{Binding AgendamentosSegunda}">
                                        <ItemsControl.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <StackPanel Orientation="Vertical"/>
                                            </ItemsPanelTemplate>
                                        </ItemsControl.ItemsPanel>

                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <Border Width="420" IsHitTestVisible="False"
                                                                Margin="6"
                                                                Padding="8"
                                                                CornerRadius="8"
                                                                Background="White"
                                                                BorderBrush="#DDD"
                                                                BorderThickness="1"                                                               
                                                                Effect="{StaticResource DropShadow}">
                                                    <Border.InputBindings>
                                                        <MouseBinding MouseAction="LeftClick"
                                                        Command="{Binding DataContext.AbrirDetalhesAgendamentoCommand,
                                                        RelativeSource={RelativeSource AncestorType=Window}}"
                                                        CommandParameter="{Binding}"/>
                                                    </Border.InputBindings>
                                                    <Border.Style>
                                                        <Style TargetType="Border">
                                                            <Setter Property="Background" Value="#F9F9F9"/>
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding TipoEntrega}" Value="Album">
                                                                    <!-- Azul claro suave -->
                                                                    <Setter Property="Background" Value="#DDE8F7"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding TipoEntrega}" Value="Painel">
                                                                    <!-- Lilás discreto -->
                                                                    <Setter Property="Background" Value="#EAE4F9"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding TipoEntrega}" Value="Banner">
                                                                    <!-- Amarelo pastel -->
                                                                    <Setter Property="Background" Value="#FFF6D1"/>
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </Border.Style>
                                                    <Grid>
                                                        <StackPanel Visibility="{Binding DataContext.ModoFotos,
                                                                    RelativeSource={RelativeSource AncestorType=Window},
                                                                    Converter={StaticResource InverseBoolToVisibilityConverter}}">
                                                            <StackPanel Orientation="Horizontal" Margin="0 0 0 0">
                                                                <TextBlock local:TextHighlight.Text="{Binding Cliente.Nome}"
                                                                            local:TextHighlight.Term="{Binding DataContext.FindTermo, RelativeSource={RelativeSource AncestorType=Window}}"
                                                                    FontFamily="Segoe UI" FontWeight="Bold" FontSize="16"/>
                                                                <TextBlock Text=" | " Foreground="Gray" Margin="4,0"/>
                                                                <TextBlock local:TextHighlight.Text="{Binding Cliente.Telefone}"
                                                                           local:TextHighlight.Term="{Binding DataContext.FindTermo, RelativeSource={RelativeSource AncestorType=Window}}" FontSize="14"/>
                                                                <TextBlock Text=" | " Foreground="Gray" Margin="4,0"/>
                                                                <StackPanel Orientation="Horizontal" Grid.Column="1" Margin="10,0,0,0">
                                                                    <!-- Botão Confirmar -->
                                                                    <Button Style="{StaticResource BtnConfirmarStyle}"/>
                                                                    <!-- Botão Cancelar -->
                                                                    <Button Style="{StaticResource BtnCancelarStyle}"/>
                                                                </StackPanel>

                                                            </StackPanel>



                                                            <StackPanel Orientation="Horizontal" Grid.Column="0" Margin="0 0 4 5">
                                                                <TextBlock Text="↳ " FontSize="16" Margin="5,-6,0,0"/>
                                                                <TextBlock Text="{Binding Crianca.Nome}" FontFamily="Arial" FontSize="14"/>
                                                                <TextBlock Text=" | " Foreground="Gray"/>
                                                                <TextBlock Text="{Binding MesversarioFormatado}" FontSize="12"/>
                                                                <TextBlock Text=" | " Foreground="Gray"/>
                                                                <TextBlock Text="{Binding Cliente.Observacao}" FontSize="12"/>
                                                            </StackPanel>



                                                            <StackPanel Orientation="Horizontal">
                                                                <TextBlock Text="{Binding Servico.Nome}" FontWeight="Bold" FontSize="13" Margin="0 0 10 4" FontFamily="Helvetica"/>
                                                                <TextBlock Text="{Binding ValorPago, StringFormat=R$ {0:N2}}" FontWeight="Bold" FontSize="13" Margin="0 0 5 0" FontFamily="Helvetica">
                                                                    <TextBlock.Style>
                                                                        <Style TargetType="TextBlock">
                                                                            <Setter Property="Foreground" Value="Red"/>
                                                                            <Style.Triggers>
                                                                                <DataTrigger Binding="{Binding EstaPago}" Value="True">
                                                                                    <Setter Property="Foreground" Value="Green"/>
                                                                                </DataTrigger>
                                                                            </Style.Triggers>
                                                                        </Style>
                                                                    </TextBlock.Style>
                                                                </TextBlock>
                                                                <TextBlock Text=" / " Foreground="Gray"/>
                                                                <TextBlock Text="{Binding Valor, StringFormat=R$ {0:N2}}" FontWeight="Bold" FontSize="13" Margin="0 0 0 4" FontFamily="Helvetica"/>
                                                            </StackPanel>

                                                            <StackPanel Orientation="Horizontal">
                                                                <TextBlock Text="{Binding Tema}" FontSize="14" Margin="0 0 6 0"/>
                                                                <TextBlock Text="{Binding Data, StringFormat=dd/MM/yyyy}" FontSize="14" Margin="0 0 6 0"/>
                                                                <TextBlock Text="{Binding Horario, StringFormat={}{0:hh\\:mm}}" FontSize="14"/>
                                                                <TextBlock Text=" | " Foreground="Gray" Margin="0,-2,0,0" FontSize="16"/>
                                                                <TextBlock Text="{Binding TipoEntrega}" Margin="2,-2,0,0" FontSize="16"/>
                                                            </StackPanel>

                                                        </StackPanel>
                                                        <!-- MODO FOTOS -->
                                                        <StackPanel Visibility="{Binding DataContext.ModoFotos,
                                                                RelativeSource={RelativeSource AncestorType=Window},
                                                                Converter={StaticResource BoolToVisibilityConverter}}">
                                                            <StackPanel Orientation="Horizontal" Margin="0 0 6 6">
                                                                <TextBlock
                                                                FontWeight="Bold" FontSize="16"
                                                                local:TextHighlight.Text="{Binding Cliente.Nome}"
                                                                local:TextHighlight.Term="{Binding DataContext.FindTermo, RelativeSource={RelativeSource AncestorType=Window}}"/>
                                                                <TextBlock Text=" - " Foreground="Gray" FontSize="16" Margin="2,0"/>
                                                                <TextBlock Text="{Binding Crianca.Nome}" FontSize="16" Margin="0,0,4,0"/>
                                                                <TextBlock Text="{Binding MesversarioFormatado}" FontSize="14" Margin="0,2,0,0"/>
                                                                <TextBlock Text=" • " Foreground="Gray" FontSize="16" Margin="6,0"/>
                                                                <TextBlock Text="{Binding Tema}" FontSize="16"/>
                                                            </StackPanel>
                                                            <StackPanel Orientation="Horizontal">
                                                                <TextBlock Text="{Binding Data, StringFormat=dd/MM/yyyy}" Margin="0,0,5,10" FontSize="14"/>
                                                                <TextBlock Text=" | " Foreground="Gray" FontSize="14"/>
                                                                <TextBlock Text="{Binding TipoEntrega}" Margin="5,-2,0,10" FontSize="16"/>
                                                            </StackPanel>
                                                            <controles:EtapasFotos/>
                                                        </StackPanel>
                                                    </Grid>
                                                </Border>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </ScrollViewer>
                            </hc:Card>
                        </Border>
                    </Grid>

                    <!-- TERÇA -->
                    <Grid Grid.Row="1" Grid.Column="1">
                        <TextBlock Text="Terça" FontSize="20" FontWeight="Bold" Foreground="Black"
                                           HorizontalAlignment="Center" Width="154" Background="#FF13FF00"
                                           TextAlignment="Center" Height="32" FontFamily="Segoe UI Black" VerticalAlignment="Top"/>
                        <Border HorizontalAlignment="Stretch" MinWidth="430" Margin="5,30,4,14">
                            <Border.Style>
                                <Style TargetType="Border">
                                    <Setter Property="BorderThickness" Value="0"/>
                                    <Setter Property="BorderBrush" Value="Transparent"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Tag, ElementName=TerProxy}" Value="True">
                                            <Setter Property="BorderBrush" Value="Red"/>
                                            <Setter Property="BorderThickness" Value="3"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Border.Style>
                            <hc:Card Background="#88FFFFFF" >
                                <ScrollViewer VerticalScrollBarVisibility="Auto" Height="380">
                                    <ItemsControl x:Name="ItemsTerca" ItemsSource="{Binding AgendamentosTerca}">
                                        <ItemsControl.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <WrapPanel Orientation="Horizontal" />
                                            </ItemsPanelTemplate>
                                        </ItemsControl.ItemsPanel>

                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <Border Width="420"
                                                                Margin="6"
                                                                Padding="8"
                                                                CornerRadius="8"
                                                                Background="White"
                                                                BorderBrush="#DDD"
                                                                BorderThickness="1"
                                                               
                                                                Effect="{StaticResource DropShadow}">
                                                    <Border.InputBindings>
                                                        <MouseBinding MouseAction="LeftClick"
                                            Command="{Binding DataContext.AbrirDetalhesAgendamentoCommand,
                                            RelativeSource={RelativeSource AncestorType=Window}}"
                                            CommandParameter="{Binding}"/>
                                                    </Border.InputBindings>
                                                    <Border.Style>
                                                        <Style TargetType="Border">
                                                            <Setter Property="Background" Value="#F9F9F9"/>
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding TipoEntrega}" Value="Album">
                                                                    <!-- Azul claro suave -->
                                                                    <Setter Property="Background" Value="#DDE8F7"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding TipoEntrega}" Value="Painel">
                                                                    <!-- Lilás discreto -->
                                                                    <Setter Property="Background" Value="#EAE4F9"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding TipoEntrega}" Value="Banner">
                                                                    <!-- Amarelo pastel -->
                                                                    <Setter Property="Background" Value="#FFF6D1"/>
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </Border.Style>
                                                    <Grid>
                                                        <Grid.ColumnDefinitions>
                                                            <!-- Coluna expansível para o texto -->
                                                            <ColumnDefinition Width="*" />
                                                            <!-- Coluna fixa para os botões -->
                                                            <ColumnDefinition Width="Auto" />
                                                        </Grid.ColumnDefinitions>
                                                        <StackPanel Visibility="{Binding DataContext.ModoFotos,
                                                                   RelativeSource={RelativeSource AncestorType=Window},
                                                                   Converter={StaticResource InverseBoolToVisibilityConverter}}">
                                                            <StackPanel Orientation="Horizontal" Margin="0 0 0 0">
                                                                <TextBlock 
                                                                     local:TextHighlight.Text="{Binding Cliente.Nome}"
                                                                     local:TextHighlight.Term="{Binding DataContext.FindTermo, RelativeSource={RelativeSource AncestorType=Window}}"
                                                                    FontFamily="Segoe UI" FontWeight="Bold" FontSize="16"/>
                                                                <TextBlock Text=" | " Foreground="Gray" Margin="4,0"/>
                                                                <TextBlock local:TextHighlight.Text="{Binding Cliente.Telefone}"
                                                                            local:TextHighlight.Term="{Binding DataContext.FindTermo,
                                                                            RelativeSource={RelativeSource AncestorType=Window}}" FontSize="14"/>
                                                                <TextBlock Text=" | " Foreground="Gray" Margin="4,0"/>

                                                                <StackPanel Orientation="Horizontal" Grid.Column="1" Margin="10,0,0,0">
                                                                    <!-- Botão Confirmar -->
                                                                    <Button Style="{StaticResource BtnConfirmarStyle}" Width="36" Height="25" FontSize="12" Foreground="White" Focusable="False"/>

                                                                    <!-- Botão Cancelar -->
                                                                    <Button Style="{StaticResource BtnCancelarStyle}"
                                                                            Width="35" Height="25"
                                                                            FontSize="12" Click="Button_Click"
                                                                            Foreground="White"
                                                                            Margin="5,0,0,0"/>
                                                                </StackPanel>

                                                            </StackPanel>

                                                            <StackPanel Orientation="Horizontal" Margin="0 0 4 5">
                                                                <TextBlock Text="↳ " FontSize="16" Margin="5,-6,0,0"/>
                                                                <TextBlock Text="{Binding Crianca.Nome}" FontFamily="Arial" FontSize="14"/>
                                                                <TextBlock Text=" | " Foreground="Gray"/>
                                                                <TextBlock Text="{Binding MesversarioFormatado}" FontSize="12"/>
                                                                <TextBlock Text=" | " Foreground="Gray"/>
                                                                <TextBlock Text="{Binding Cliente.Observacao}" FontSize="12"/>
                                                            </StackPanel>

                                                            <StackPanel Orientation="Horizontal">
                                                                <TextBlock Text="{Binding Servico.Nome}" FontWeight="Bold" FontSize="13" Margin="0 0 10 4" FontFamily="Helvetica"/>
                                                                <TextBlock Text="{Binding ValorPago, StringFormat=R$ {0:N2}}" FontWeight="Bold" FontSize="13" Margin="0 0 5 0" FontFamily="Helvetica">
                                                                    <TextBlock.Style>
                                                                        <Style TargetType="TextBlock">
                                                                            <Setter Property="Foreground" Value="Red"/>
                                                                            <Style.Triggers>
                                                                                <DataTrigger Binding="{Binding EstaPago}" Value="True">
                                                                                    <Setter Property="Foreground" Value="Green"/>
                                                                                </DataTrigger>
                                                                            </Style.Triggers>
                                                                        </Style>
                                                                    </TextBlock.Style>
                                                                </TextBlock>
                                                                <TextBlock Text=" / " Foreground="Gray"/>
                                                                <TextBlock Text="{Binding Valor, StringFormat=R$ {0:N2}}" FontWeight="Bold" FontSize="13" Margin="0 0 0 4" FontFamily="Helvetica"/>
                                                            </StackPanel>

                                                            <StackPanel Orientation="Horizontal">
                                                                <TextBlock Text="{Binding Tema}" FontSize="14" Margin="0 0 6 0"/>
                                                                <TextBlock Text="{Binding Data, StringFormat=dd/MM/yyyy}" FontSize="14" Margin="0 0 6 0"/>
                                                                <TextBlock Text="{Binding Horario, StringFormat={}{0:hh\\:mm}}" FontSize="14"/>
                                                                <TextBlock Text=" | " Foreground="Gray" Margin="0,-2,0,0" FontSize="16"/>
                                                                <TextBlock Text="{Binding TipoEntrega}" Margin="2,-2,0,0" FontSize="16"/>
                                                            </StackPanel>

                                                        </StackPanel>
                                                        <!-- MODO FOTOS -->
                                                        <StackPanel Visibility="{Binding DataContext.ModoFotos,
                                                            RelativeSource={RelativeSource AncestorType=Window},
                                                            Converter={StaticResource BoolToVisibilityConverter}}">
                                                            <StackPanel Orientation="Horizontal" Margin="0 0 6 6">
                                                                <TextBlock            
                                                                    local:TextHighlight.Text="{Binding Cliente.Nome}"
                                                                    local:TextHighlight.Term="{Binding DataContext.FindTermo, RelativeSource={RelativeSource AncestorType=Window}}"
                                                                    FontWeight="Bold" FontSize="16"/>
                                                                <TextBlock Text=" - " Foreground="Gray" FontSize="16" Margin="2,0"/>
                                                                <TextBlock Text="{Binding Crianca.Nome}" FontSize="16" Margin="0,0,4,0"/>
                                                                <TextBlock Text="{Binding MesversarioFormatado}" FontSize="14" Margin="0,2,0,0"/>
                                                                <TextBlock Text=" • " Foreground="Gray" FontSize="16" Margin="6,0"/>
                                                                <TextBlock Text="{Binding Tema}" FontSize="16"/>
                                                            </StackPanel>
                                                            <StackPanel Orientation="Horizontal">
                                                                <TextBlock Text="{Binding Data, StringFormat=dd/MM/yyyy}" Margin="0,0,5,10" FontSize="14"/>
                                                                <TextBlock Text=" | " Foreground="Gray" FontSize="14"/>
                                                                <TextBlock Text="{Binding TipoEntrega}" Margin="5,-2,0,10" FontSize="16"/>
                                                            </StackPanel>
                                                            <controles:EtapasFotos/>
                                                        </StackPanel>
                                                    </Grid>
                                                </Border>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </ScrollViewer>
                            </hc:Card>
                        </Border>
                    </Grid>




                    <!-- Sexta -->
                    <Grid Grid.Row="2" Grid.Column="1">
                        <TextBlock Text="Sexta" FontSize="20" Height="32" FontWeight="Bold" Foreground="Black"
                                           HorizontalAlignment="Center" Width="154" Background="#FF13FF00"
                                           TextAlignment="Center" FontFamily="Segoe UI Black" VerticalAlignment="Top"/>
                        <Border HorizontalAlignment="Stretch" Margin="5,30,4,14">
                            <Border.Style>
                                <Style TargetType="Border">
                                    <Setter Property="BorderThickness" Value="0"/>
                                    <Setter Property="BorderBrush" Value="Transparent"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Tag, ElementName=SexProxy}" Value="True">
                                            <Setter Property="BorderBrush" Value="Red"/>
                                            <Setter Property="BorderThickness" Value="3"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Border.Style>
                            <hc:Card Background="#88FFFFFF">
                                <ScrollViewer VerticalScrollBarVisibility="Auto" Height="380">
                                    <ItemsControl x:Name="ItemsSexta" ItemsSource="{Binding AgendamentosSexta}">
                                        <ItemsControl.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <WrapPanel Orientation="Horizontal" />
                                            </ItemsPanelTemplate>
                                        </ItemsControl.ItemsPanel>
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <Border Width="420" Margin="6" Padding="8" CornerRadius="8"
                                                                Background="White" BorderBrush="#DDD" BorderThickness="1"
                                                               
                                                                Effect="{StaticResource DropShadow}">
                                                    <Border.InputBindings>
                                                        <MouseBinding MouseAction="LeftClick"
                                            Command="{Binding DataContext.AbrirDetalhesAgendamentoCommand,
                                            RelativeSource={RelativeSource AncestorType=Window}}"
                                            CommandParameter="{Binding}"/>
                                                    </Border.InputBindings>
                                                    <Border.Style>
                                                        <Style TargetType="Border">
                                                            <Setter Property="Background" Value="#F9F9F9"/>
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding TipoEntrega}" Value="Album">
                                                                    <!-- Azul claro suave -->
                                                                    <Setter Property="Background" Value="#DDE8F7"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding TipoEntrega}" Value="Painel">
                                                                    <!-- Lilás discreto -->
                                                                    <Setter Property="Background" Value="#EAE4F9"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding TipoEntrega}" Value="Banner">
                                                                    <!-- Amarelo pastel -->
                                                                    <Setter Property="Background" Value="#FFF6D1"/>
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </Border.Style>
                                                    <Grid>

                                                        <StackPanel Visibility="{Binding DataContext.ModoFotos,
                                                               RelativeSource={RelativeSource AncestorType=Window},
                                                               Converter={StaticResource InverseBoolToVisibilityConverter}}">
                                                            <StackPanel Orientation="Horizontal" Margin="0 0 0 0">
                                                                <TextBlock local:TextHighlight.Text="{Binding Cliente.Nome}"
                                                                            local:TextHighlight.Term="{Binding DataContext.FindTermo, RelativeSource={RelativeSource AncestorType=Window}}"
                                                                            FontWeight="Bold" FontSize="16"/>
                                                                <TextBlock Text=" | " Foreground="Gray" Margin="4,0"/>
                                                                <TextBlock local:TextHighlight.Text="{Binding Cliente.Telefone}"
                                                                            local:TextHighlight.Term="{Binding DataContext.FindTermo,
                                                                            RelativeSource={RelativeSource AncestorType=Window}}" FontSize="14"/>
                                                                <TextBlock Text=" | " Foreground="Gray" Margin="4,0"/>
                                                                <StackPanel Orientation="Horizontal" Grid.Column="1" Margin="10,0,0,0">
                                                                    <!-- Botão Confirmar -->
                                                                    <Button Style="{StaticResource BtnConfirmarStyle}"/>
                                                                    <!-- Botão Cancelar -->
                                                                    <Button Style="{StaticResource BtnCancelarStyle}"/>
                                                                </StackPanel>

                                                            </StackPanel>

                                                            <StackPanel Orientation="Horizontal" Margin="0 0 4 5">
                                                                <TextBlock Text="↳ " FontSize="16" Margin="5,-6,0,0"/>
                                                                <TextBlock Text="{Binding Crianca.Nome}" FontFamily="Arial" FontSize="14"/>
                                                                <TextBlock Text=" | " Foreground="Gray"/>
                                                                <TextBlock Text="{Binding MesversarioFormatado}" FontSize="12"/>
                                                                <TextBlock Text=" | " Foreground="Gray"/>
                                                                <TextBlock Text="{Binding Cliente.Observacao}" FontSize="12"/>
                                                            </StackPanel>

                                                            <StackPanel Orientation="Horizontal">
                                                                <TextBlock Text="{Binding Servico.Nome}" FontWeight="Bold" FontSize="13" Margin="0 0 10 4" FontFamily="Helvetica"/>
                                                                <TextBlock Text="{Binding ValorPago, StringFormat=R$ {0:N2}}" FontWeight="Bold" FontSize="13" Margin="0 0 5 0" FontFamily="Helvetica">
                                                                    <TextBlock.Style>
                                                                        <Style TargetType="TextBlock">
                                                                            <Setter Property="Foreground" Value="Red"/>
                                                                            <Style.Triggers>
                                                                                <DataTrigger Binding="{Binding EstaPago}" Value="True">
                                                                                    <Setter Property="Foreground" Value="Green"/>
                                                                                </DataTrigger>
                                                                            </Style.Triggers>
                                                                        </Style>
                                                                    </TextBlock.Style>
                                                                </TextBlock>
                                                                <TextBlock Text=" / " Foreground="Gray"/>
                                                                <TextBlock Text="{Binding Valor, StringFormat=R$ {0:N2}}" FontWeight="Bold" FontSize="13" Margin="0 0 0 4" FontFamily="Helvetica"/>
                                                            </StackPanel>

                                                            <StackPanel Orientation="Horizontal">
                                                                <TextBlock Text="{Binding Tema}" FontSize="14" Margin="0 0 6 0"/>
                                                                <TextBlock Text="{Binding Data, StringFormat=dd/MM/yyyy}" FontSize="14" Margin="0 0 6 0"/>
                                                                <TextBlock Text="{Binding Horario, StringFormat={}{0:hh\\:mm}}" FontSize="14"/>
                                                                <TextBlock Text=" | " Foreground="Gray" Margin="0,-2,0,0" FontSize="16"/>
                                                                <TextBlock Text="{Binding TipoEntrega}" Margin="2,-2,0,0" FontSize="16"/>
                                                            </StackPanel>
                                                        </StackPanel>
                                                        <!-- MODO FOTOS -->
                                                        <StackPanel Visibility="{Binding DataContext.ModoFotos,
                                                                   RelativeSource={RelativeSource AncestorType=Window},
                                                                   Converter={StaticResource BoolToVisibilityConverter}}">
                                                            <StackPanel Orientation="Horizontal" Margin="0 0 6 6">
                                                                <TextBlock local:TextHighlight.Text="{Binding Cliente.Nome}"
                                                                            local:TextHighlight.Term="{Binding DataContext.FindTermo, RelativeSource={RelativeSource AncestorType=Window}}"
                                                                            FontWeight="Bold" FontSize="16"/>
                                                                <TextBlock Text=" - " Foreground="Gray" FontSize="16" Margin="2,0"/>
                                                                <TextBlock Text="{Binding Crianca.Nome}" FontSize="16" Margin="0,0,4,0"/>
                                                                <TextBlock Text="{Binding MesversarioFormatado}" FontSize="14" Margin="0,2,0,0"/>
                                                                <TextBlock Text=" • " Foreground="Gray" FontSize="16" Margin="6,0"/>
                                                                <TextBlock Text="{Binding Tema}" FontSize="16"/>
                                                            </StackPanel>
                                                            <StackPanel Orientation="Horizontal">
                                                                <TextBlock Text="{Binding Data, StringFormat=dd/MM/yyyy}" Margin="0,0,5,10" FontSize="16"/>
                                                                <TextBlock Text=" | " Foreground="Gray" FontSize="14"/>
                                                                <TextBlock Text="{Binding TipoEntrega}" Margin="5,-2,0,10" FontSize="16"/>
                                                            </StackPanel>
                                                            <controles:EtapasFotos/>

                                                        </StackPanel>
                                                    </Grid>
                                                </Border>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </ScrollViewer>
                            </hc:Card>
                        </Border>
                    </Grid>

                    <!-- QUINTA -->
                    <Grid Grid.Row="2" Grid.Column="0">
                        <TextBlock Text="Quinta" FontSize="20" FontWeight="Bold" Foreground="Black"
                                           HorizontalAlignment="Center" Width="154" Height="32"  Background="#FF13FF00"
                                           TextAlignment="Center" VerticalAlignment="Top" FontFamily="Segoe UI Black"/>
                        <Border HorizontalAlignment="Stretch" MinWidth="430" Margin="5,30,4,14">
                            <Border.Style>
                                <Style TargetType="Border">
                                    <Setter Property="BorderThickness" Value="0"/>
                                    <Setter Property="BorderBrush" Value="Transparent"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Tag, ElementName=QuiProxy}" Value="True">
                                            <Setter Property="BorderBrush" Value="Red"/>
                                            <Setter Property="BorderThickness" Value="3"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Border.Style>
                            <hc:Card Background="#88FFFFFF" >
                                <ScrollViewer VerticalScrollBarVisibility="Auto" Height="380">
                                    <ItemsControl x:Name="ItemsQuinta" ItemsSource="{Binding AgendamentosQuinta}">
                                        <ItemsControl.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <WrapPanel Orientation="Horizontal" />
                                            </ItemsPanelTemplate>
                                        </ItemsControl.ItemsPanel>
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <Border Width="420" Margin="6" Padding="8" CornerRadius="8"
                                                                Background="White" BorderBrush="#DDD" BorderThickness="1"
                                                                                                        
                                                                Effect="{StaticResource DropShadow}">
                                                    <Border.InputBindings>
                                                        <MouseBinding MouseAction="LeftClick"
                                            Command="{Binding DataContext.AbrirDetalhesAgendamentoCommand,
                                            RelativeSource={RelativeSource AncestorType=Window}}"
                                            CommandParameter="{Binding}"/>
                                                    </Border.InputBindings>
                                                    <Border.Style>
                                                        <Style TargetType="Border">
                                                            <Setter Property="Background" Value="#F9F9F9"/>
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding TipoEntrega}" Value="Album">
                                                                    <!-- Azul claro suave -->
                                                                    <Setter Property="Background" Value="#DDE8F7"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding TipoEntrega}" Value="Painel">
                                                                    <!-- Lilás discreto -->
                                                                    <Setter Property="Background" Value="#EAE4F9"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding TipoEntrega}" Value="Banner">
                                                                    <!-- Amarelo pastel -->
                                                                    <Setter Property="Background" Value="#FFF6D1"/>
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </Border.Style>
                                                    <Grid>
                                                        <StackPanel Visibility="{Binding DataContext.ModoFotos,
                                                                    RelativeSource={RelativeSource AncestorType=Window},
                                                                    Converter={StaticResource InverseBoolToVisibilityConverter}}">
                                                            <StackPanel Orientation="Horizontal" Margin="0 0 0 0">
                                                                <TextBlock local:TextHighlight.Text="{Binding Cliente.Nome}"
                                                                            local:TextHighlight.Term="{Binding DataContext.FindTermo, RelativeSource={RelativeSource AncestorType=Window}}"
                                                                            FontWeight="Bold" FontSize="16"/>
                                                                <TextBlock Text=" | " Foreground="Gray" Margin="4,0"/>
                                                                <TextBlock local:TextHighlight.Text="{Binding Cliente.Telefone}"
                                                                            local:TextHighlight.Term="{Binding DataContext.FindTermo,
                                                                            RelativeSource={RelativeSource AncestorType=Window}}" FontSize="14"/>
                                                                <TextBlock Text=" | " Foreground="Gray" Margin="4,0"/>
                                                                <StackPanel Orientation="Horizontal" Grid.Column="1" Margin="10,0,0,0">
                                                                    <!-- Botão Confirmar -->
                                                                    <Button Style="{StaticResource BtnConfirmarStyle}"/>
                                                                    <!-- Botão Cancelar -->
                                                                    <Button Style="{StaticResource BtnCancelarStyle}"/>
                                                                </StackPanel>

                                                            </StackPanel>

                                                            <StackPanel Orientation="Horizontal" Margin="0 0 4 5">
                                                                <TextBlock Text="↳ " FontSize="16" Margin="5,-6,0,0"/>
                                                                <TextBlock Text="{Binding Crianca.Nome}" FontFamily="Arial" FontSize="14"/>
                                                                <TextBlock Text=" | " Foreground="Gray"/>
                                                                <TextBlock Text="{Binding MesversarioFormatado}" FontSize="12"/>
                                                                <TextBlock Text=" | " Foreground="Gray"/>
                                                                <TextBlock Text="{Binding Cliente.Observacao}" FontSize="12"/>
                                                            </StackPanel>

                                                            <StackPanel Orientation="Horizontal">
                                                                <TextBlock Text="{Binding Servico.Nome}" FontWeight="Bold" FontSize="13" Margin="0 0 10 4" FontFamily="Helvetica"/>

                                                                <TextBlock Text="{Binding ValorPago, StringFormat=R$ {0:N2}}" FontWeight="Bold" FontSize="14" Margin="0 0 5 0" FontFamily="Helvetica">
                                                                    <TextBlock.Style>
                                                                        <Style TargetType="TextBlock">
                                                                            <Setter Property="Foreground" Value="Red"/>
                                                                            <Style.Triggers>
                                                                                <DataTrigger Binding="{Binding EstaPago}" Value="True">
                                                                                    <Setter Property="Foreground" Value="Green"/>
                                                                                </DataTrigger>
                                                                            </Style.Triggers>
                                                                        </Style>
                                                                    </TextBlock.Style>
                                                                </TextBlock>
                                                                <TextBlock Text=" / " Foreground="Gray"/>
                                                                <TextBlock Text="{Binding Valor, StringFormat=R$ {0:N2}}" FontWeight="Bold" FontSize="14" Margin="0 0 0 4" FontFamily="Helvetica"/>
                                                            </StackPanel>

                                                            <StackPanel Orientation="Horizontal">
                                                                <TextBlock Text="{Binding Tema}" FontSize="14" Margin="0 0 6 0"/>
                                                                <TextBlock Text="{Binding Data, StringFormat=dd/MM/yyyy}" FontSize="14" Margin="0 0 6 0"/>
                                                                <TextBlock Text="{Binding Horario, StringFormat={}{0:hh\\:mm}}" FontSize="14"/>
                                                                <TextBlock Text=" | " Foreground="Gray" Margin="0,-2,0,0" FontSize="16"/>
                                                                <TextBlock Text="{Binding TipoEntrega}" Margin="2,-2,0,0" FontSize="16"/>
                                                            </StackPanel>


                                                        </StackPanel>
                                                        <!-- MODO FOTOS -->
                                                        <StackPanel Visibility="{Binding DataContext.ModoFotos,
                                                                    RelativeSource={RelativeSource AncestorType=Window},
                                                                    Converter={StaticResource BoolToVisibilityConverter}}">
                                                            <StackPanel Orientation="Horizontal" Margin="0 0 6 6">
                                                                <TextBlock local:TextHighlight.Text="{Binding Cliente.Nome}"
                                                                            local:TextHighlight.Term="{Binding DataContext.FindTermo, RelativeSource={RelativeSource AncestorType=Window}}"
                                                                            FontWeight="Bold" FontSize="16"/>
                                                                <TextBlock Text=" - " Foreground="Gray" FontSize="16" Margin="2,0"/>
                                                                <TextBlock Text="{Binding Crianca.Nome}" FontSize="16" Margin="0,0,4,0"/>
                                                                <TextBlock Text="{Binding MesversarioFormatado}" FontSize="14" Margin="0,2,0,0"/>
                                                                <TextBlock Text=" • " Foreground="Gray" FontSize="16" Margin="6,0"/>
                                                                <TextBlock Text="{Binding Tema}" FontSize="16"/>
                                                            </StackPanel>
                                                            <StackPanel Orientation="Horizontal">
                                                                <TextBlock Text="{Binding Data, StringFormat=dd/MM/yyyy}" Margin="0,0,5,10" FontSize="14"/>
                                                                <TextBlock Text=" | " Foreground="Gray" FontSize="14"/>
                                                                <TextBlock Text="{Binding TipoEntrega}" Margin="5,-2,0,10" FontSize="16"/>
                                                            </StackPanel>
                                                            <controles:EtapasFotos/>
                                                        </StackPanel>
                                                    </Grid>
                                                </Border>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </ScrollViewer>
                            </hc:Card>
                        </Border>
                    </Grid>

                    <!-- QUARTA -->
                    <Grid Grid.Row="1" Grid.Column="2">
                        <TextBlock Text="Quarta" FontSize="20" Height="32" FontWeight="Bold" Foreground="Black"
                                               HorizontalAlignment="Center" Width="154" Background="#FF13FF00"
                                               TextAlignment="Center" FontFamily="Segoe UI Black" VerticalAlignment="Top"/>
                        <Border HorizontalAlignment="Stretch" MinWidth="430" Margin="5,30,4,14">
                            <Border.Style>
                                <Style TargetType="Border">
                                    <Setter Property="BorderThickness" Value="0"/>
                                    <Setter Property="BorderBrush" Value="Transparent"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Tag, ElementName=QuaProxy}" Value="True">
                                            <Setter Property="BorderBrush" Value="Red"/>
                                            <Setter Property="BorderThickness" Value="3"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Border.Style>
                            <hc:Card Background="#88FFFFFF">
                                <ScrollViewer VerticalScrollBarVisibility="Auto" Height="380">
                                    <ItemsControl x:Name="ItemsQuarta" ItemsSource="{Binding AgendamentosQuarta}">
                                        <ItemsControl.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <StackPanel Orientation="Vertical" />
                                            </ItemsPanelTemplate>
                                        </ItemsControl.ItemsPanel>
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <Border Width="420" Margin="6" Padding="8" CornerRadius="8"
                                                                Background="White" BorderBrush="#DDD" BorderThickness="1"
                                                                                                                       
                                                                Effect="{StaticResource DropShadow}">
                                                    <Border.InputBindings>
                                                        <MouseBinding MouseAction="LeftClick"
                                            Command="{Binding DataContext.AbrirDetalhesAgendamentoCommand,
                                            RelativeSource={RelativeSource AncestorType=Window}}"
                                            CommandParameter="{Binding}"/>
                                                    </Border.InputBindings>
                                                    <Border.Style>
                                                        <Style TargetType="Border">
                                                            <Setter Property="Background" Value="#F9F9F9"/>
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding TipoEntrega}" Value="Album">
                                                                    <!-- Azul claro suave -->
                                                                    <Setter Property="Background" Value="#DDE8F7"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding TipoEntrega}" Value="Painel">
                                                                    <!-- Lilás discreto -->
                                                                    <Setter Property="Background" Value="#EAE4F9"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding TipoEntrega}" Value="Banner">
                                                                    <!-- Amarelo pastel -->
                                                                    <Setter Property="Background" Value="#FFF6D1"/>
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </Border.Style>
                                                    <Grid>
                                                        <StackPanel Visibility="{Binding DataContext.ModoFotos,
                                                                    RelativeSource={RelativeSource AncestorType=Window},
                                                                    Converter={StaticResource InverseBoolToVisibilityConverter}}">
                                                            <StackPanel Orientation="Horizontal" Margin="0 0 0 0">
                                                                <TextBlock local:TextHighlight.Text="{Binding Cliente.Nome}"
                                                                            local:TextHighlight.Term="{Binding DataContext.FindTermo, RelativeSource={RelativeSource AncestorType=Window}}"
                                                                            FontWeight="Bold" FontSize="16"/>
                                                                <TextBlock Text=" | " Foreground="Gray" Margin="4,0"/>
                                                                <TextBlock local:TextHighlight.Text="{Binding Cliente.Telefone}"
                                                                            local:TextHighlight.Term="{Binding DataContext.FindTermo,
                                                                            RelativeSource={RelativeSource AncestorType=Window}}" FontSize="14"/>
                                                                <TextBlock Text=" | " Foreground="Gray" Margin="4,0"/>
                                                                <StackPanel Orientation="Horizontal" Grid.Column="1" Margin="10,0,0,0">
                                                                    <!-- Botão Confirmar -->
                                                                    <Button Style="{StaticResource BtnConfirmarStyle}"/>
                                                                    <!-- Botão Cancelar -->
                                                                    <Button Style="{StaticResource BtnCancelarStyle}"/>
                                                                </StackPanel>

                                                            </StackPanel>
                                                            <StackPanel Orientation="Horizontal" Margin="0 0 4 5">
                                                                <TextBlock Text="↳ " FontSize="16" Margin="5,-6,0,0"/>
                                                                <TextBlock Text="{Binding Crianca.Nome}" FontFamily="Arial" FontSize="14"/>
                                                                <TextBlock Text=" | " Foreground="Gray"/>
                                                                <TextBlock Text="{Binding MesversarioFormatado}" FontSize="12"/>
                                                                <TextBlock Text=" | " Foreground="Gray"/>
                                                                <TextBlock Text="{Binding Cliente.Observacao}" FontSize="12"/>
                                                            </StackPanel>

                                                            <StackPanel Orientation="Horizontal">
                                                                <TextBlock Text="{Binding Servico.Nome}" FontWeight="Bold" FontSize="13" Margin="0 0 10 4" FontFamily="Helvetica"/>
                                                                <TextBlock Text="{Binding ValorPago, StringFormat=R$ {0:N2}}" FontWeight="Bold" FontSize="13" Margin="0 0 5 0" FontFamily="Helvetica">
                                                                    <TextBlock.Style>
                                                                        <Style TargetType="TextBlock">
                                                                            <Setter Property="Foreground" Value="Red"/>
                                                                            <Style.Triggers>
                                                                                <DataTrigger Binding="{Binding EstaPago}" Value="True">
                                                                                    <Setter Property="Foreground" Value="Green"/>
                                                                                </DataTrigger>
                                                                            </Style.Triggers>
                                                                        </Style>
                                                                    </TextBlock.Style>
                                                                </TextBlock>
                                                                <TextBlock Text=" / " Foreground="Gray"/>
                                                                <TextBlock Text="{Binding Valor, StringFormat=R$ {0:N2}}" FontWeight="Bold" FontSize="13" Margin="0 0 0 4" FontFamily="Helvetica"/>
                                                            </StackPanel>

                                                            <StackPanel Orientation="Horizontal">
                                                                <TextBlock Text="{Binding Tema}" FontSize="14" Margin="0 0 6 0"/>
                                                                <TextBlock Text="{Binding Data, StringFormat=dd/MM/yyyy}" FontSize="14" Margin="0 0 6 0"/>
                                                                <TextBlock Text="{Binding Horario, StringFormat={}{0:hh\\:mm}}" FontSize="14"/>
                                                                <TextBlock Text=" | " Foreground="Gray" Margin="0,-2,0,0" FontSize="16"/>
                                                                <TextBlock Text="{Binding TipoEntrega}" Margin="2,-2,0,0" FontSize="16"/>
                                                            </StackPanel>
                                                        </StackPanel>
                                                        <!-- MODO FOTOS -->
                                                        <StackPanel Visibility="{Binding DataContext.ModoFotos,
                                                               RelativeSource={RelativeSource AncestorType=Window},
                                                               Converter={StaticResource BoolToVisibilityConverter}}">
                                                            <StackPanel Orientation="Horizontal" Margin="0 0 6 6">
                                                                <TextBlock local:TextHighlight.Text="{Binding Cliente.Nome}"
                                                                            local:TextHighlight.Term="{Binding DataContext.FindTermo, RelativeSource={RelativeSource AncestorType=Window}}"
                                                                            FontWeight="Bold" FontSize="16"/>
                                                                <TextBlock Text=" - " Foreground="Gray" FontSize="16" Margin="2,0"/>
                                                                <TextBlock Text="{Binding Crianca.Nome}" FontSize="16" Margin="0,0,4,0"/>
                                                                <TextBlock Text="{Binding MesversarioFormatado}" FontSize="14" Margin="0,2,0,0"/>
                                                                <TextBlock Text=" • " Foreground="Gray" FontSize="16" Margin="6,0"/>
                                                                <TextBlock Text="{Binding Tema}" FontSize="16"/>
                                                            </StackPanel>
                                                            <StackPanel Orientation="Horizontal">
                                                                <TextBlock Text="{Binding Data, StringFormat=dd/MM/yyyy}" Margin="0,0,5,10" FontSize="14"/>
                                                                <TextBlock Text=" | " Foreground="Gray" FontSize="14"/>
                                                                <TextBlock Text="{Binding TipoEntrega}" Margin="5,-2,0,10" FontSize="16"/>
                                                            </StackPanel>
                                                            <controles:EtapasFotos/>
                                                        </StackPanel>
                                                    </Grid>
                                                </Border>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </ScrollViewer>
                            </hc:Card>
                        </Border>
                    </Grid>

                    <!-- SÁBADO -->
                    <Grid Grid.Row="2" Grid.Column="2">
                        <TextBlock Text="Sábado"
                                           FontSize="20"
                                           FontWeight="Bold"
                                           Foreground="Black"
                                           HorizontalAlignment="Center"
                                           Width="154" Height="32"
                                           Background="#FF13FF00"
                                           TextAlignment="Center"
                                           FontFamily="Segoe UI Black" VerticalAlignment="Top"
                                            />

                        <Border HorizontalAlignment="Stretch" Margin="5,30,4,14">
                            <Border.Style>
                                <Style TargetType="Border">
                                    <Setter Property="BorderThickness" Value="0"/>
                                    <Setter Property="BorderBrush" Value="Transparent"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Tag, ElementName=SabProxy}" Value="True">
                                            <Setter Property="BorderBrush" Value="Red"/>
                                            <Setter Property="BorderThickness" Value="3"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Border.Style>

                            <hc:Card Background="#88FFFFFF" Opacity="1.0">
                                <ScrollViewer HorizontalScrollBarVisibility="Auto" Height="380" VerticalScrollBarVisibility="Auto">
                                    <ItemsControl x:Name="ItemsSabado" ItemsSource="{Binding AgendamentosSabado}">
                                        <ItemsControl.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <WrapPanel Orientation="Vertical" />
                                            </ItemsPanelTemplate>
                                        </ItemsControl.ItemsPanel>

                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <Border Width="420"
                                                                Margin="6"
                                                                Padding="8"
                                                                CornerRadius="8"
                                                                Background="White"
                                                                BorderBrush="#DDD"
                                                                BorderThickness="1"
                                                               
                                                                Effect="{StaticResource DropShadow}">
                                                    <Border.InputBindings>
                                                        <MouseBinding MouseAction="LeftClick"
                                            Command="{Binding DataContext.AbrirDetalhesAgendamentoCommand,
                                            RelativeSource={RelativeSource AncestorType=Window}}"
                                            CommandParameter="{Binding}"/>
                                                    </Border.InputBindings>
                                                    <Border.Style>
                                                        <Style TargetType="Border">
                                                            <Setter Property="Background" Value="#F9F9F9"/>
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding TipoEntrega}" Value="Album">
                                                                    <!-- Azul claro suave -->
                                                                    <Setter Property="Background" Value="#DDE8F7"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding TipoEntrega}" Value="Painel">
                                                                    <!-- Lilás discreto -->
                                                                    <Setter Property="Background" Value="#EAE4F9"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding TipoEntrega}" Value="Banner">
                                                                    <!-- Amarelo pastel -->
                                                                    <Setter Property="Background" Value="#FFF6D1"/>
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </Border.Style>
                                                    <Grid>
                                                        <StackPanel Visibility="{Binding DataContext.ModoFotos,
                                                                    RelativeSource={RelativeSource AncestorType=Window},
                                                                    Converter={StaticResource InverseBoolToVisibilityConverter}}">
                                                            <StackPanel Orientation="Horizontal" Margin="0 0 0 0">
                                                                <TextBlock local:TextHighlight.Text="{Binding Cliente.Nome}"
                                                                            local:TextHighlight.Term="{Binding DataContext.FindTermo, RelativeSource={RelativeSource AncestorType=Window}}"
                                                                            FontWeight="Bold" FontSize="16"/>
                                                                <TextBlock Text=" | " Foreground="Gray" Margin="4,0"/>
                                                                <TextBlock local:TextHighlight.Text="{Binding Cliente.Telefone}"
                                                                            local:TextHighlight.Term="{Binding DataContext.FindTermo,
                                                                            RelativeSource={RelativeSource AncestorType=Window}}" FontSize="14"/>
                                                                <TextBlock Text=" | " Foreground="Gray" Margin="4,0"/>
                                                                <StackPanel Orientation="Horizontal" Grid.Column="1" Margin="10,0,0,0">
                                                                    <!-- Botão Confirmar -->
                                                                    <Button Style="{StaticResource BtnConfirmarStyle}"/>
                                                                    <!-- Botão Cancelar -->
                                                                    <Button Style="{StaticResource BtnCancelarStyle}"/>
                                                                </StackPanel>

                                                            </StackPanel>

                                                            <StackPanel Orientation="Horizontal" Margin="0 0 4 5">
                                                                <TextBlock Text="↳ " FontSize="16" Margin="5,-6,0,0"/>
                                                                <TextBlock Text="{Binding Crianca.Nome}" FontFamily="Arial" FontSize="14"/>
                                                                <TextBlock Text=" | " Foreground="Gray"/>
                                                                <TextBlock Text="{Binding MesversarioFormatado}" FontSize="12"/>
                                                                <TextBlock Text=" | " Foreground="Gray"/>
                                                                <TextBlock Text="{Binding Cliente.Observacao}" FontSize="12"/>
                                                            </StackPanel>

                                                            <StackPanel Orientation="Horizontal">
                                                                <TextBlock Text="{Binding Servico.Nome}" FontWeight="Bold" FontSize="13" Margin="0 0 10 4" FontFamily="Helvetica"/>
                                                                <TextBlock Text="{Binding ValorPago, StringFormat=R$ {0:N2}}" FontWeight="Bold" FontSize="13" Margin="0 0 5 0" FontFamily="Helvetica">
                                                                    <TextBlock.Style>
                                                                        <Style TargetType="TextBlock">
                                                                            <Setter Property="Foreground" Value="Red"/>
                                                                            <Style.Triggers>
                                                                                <DataTrigger Binding="{Binding EstaPago}" Value="True">
                                                                                    <Setter Property="Foreground" Value="Green"/>
                                                                                </DataTrigger>
                                                                            </Style.Triggers>
                                                                        </Style>
                                                                    </TextBlock.Style>
                                                                </TextBlock>
                                                                <TextBlock Text=" / " Foreground="Gray"/>
                                                                <TextBlock Text="{Binding Valor, StringFormat=R$ {0:N2}}" FontWeight="Bold" FontSize="13" Margin="0 0 0 4" FontFamily="Helvetica"/>
                                                            </StackPanel>

                                                            <StackPanel Orientation="Horizontal">
                                                                <TextBlock Text="{Binding Tema}" FontSize="14" Margin="0 0 6 0"/>
                                                                <TextBlock Text="{Binding Data, StringFormat=dd/MM/yyyy}" FontSize="14" Margin="0 0 6 0"/>
                                                                <TextBlock Text="{Binding Horario, StringFormat={}{0:hh\\:mm}}" FontSize="14"/>
                                                                <TextBlock Text=" | " Foreground="Gray" Margin="0,-2,0,0" FontSize="16"/>
                                                                <TextBlock Text="{Binding TipoEntrega}" Margin="2,-2,0,0" FontSize="16"/>
                                                            </StackPanel>
                                                        </StackPanel>
                                                        <!-- MODO FOTOS -->
                                                        <StackPanel Visibility="{Binding DataContext.ModoFotos,
                                                            RelativeSource={RelativeSource AncestorType=Window},
                                                            Converter={StaticResource BoolToVisibilityConverter}}">
                                                            <StackPanel Orientation="Horizontal" Margin="0 0 6 6">
                                                                <TextBlock local:TextHighlight.Text="{Binding Cliente.Nome}"
                                                                            local:TextHighlight.Term="{Binding DataContext.FindTermo, RelativeSource={RelativeSource AncestorType=Window}}"
                                                                            FontWeight="Bold" FontSize="16"/>
                                                                <TextBlock Text=" - " Foreground="Gray" FontSize="16" Margin="2,0"/>
                                                                <TextBlock Text="{Binding Crianca.Nome}" FontSize="16" Margin="0,0,4,0"/>
                                                                <TextBlock Text="{Binding MesversarioFormatado}" FontSize="14" Margin="0,2,0,0"/>
                                                                <TextBlock Text=" • " Foreground="Gray" FontSize="16" Margin="6,0"/>
                                                                <TextBlock Text="{Binding Tema}" FontSize="16"/>
                                                            </StackPanel>
                                                            <StackPanel Orientation="Horizontal">
                                                                <TextBlock Text="{Binding Data, StringFormat=dd/MM/yyyy}" Margin="0,0,5,10" FontSize="14"/>
                                                                <TextBlock Text=" | " Foreground="Gray" FontSize="14"/>
                                                                <TextBlock Text="{Binding TipoEntrega}" Margin="5,-2,0,10" FontSize="16"/>
                                                            </StackPanel>
                                                            <controles:EtapasFotos/>

                                                        </StackPanel>

                                                    </Grid>
                                                </Border>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </ScrollViewer>
                            </hc:Card>
                        </Border>
                    </Grid>


                    <!-- DOMINGO -->
                    <Grid Grid.Row="3" Grid.Column="1">
                        <TextBlock Text="Domingo"
                                           FontSize="20"
                                           FontWeight="Bold"
                                           Foreground="Black"
                                           HorizontalAlignment="Center"
                                           Width="154" Height="32"
                                           Background="#FF13FF00"
                                           TextAlignment="Center"
                                           FontFamily="Segoe UI Black" VerticalAlignment="Top"
                                            />

                        <Border MinWidth="430" Margin="5,30,4,14">
                            <Border.Style>
                                <Style TargetType="Border">
                                    <Setter Property="BorderThickness" Value="0"/>
                                    <Setter Property="BorderBrush" Value="Transparent"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Tag, ElementName=DomProxy}" Value="True">
                                            <Setter Property="BorderBrush" Value="Red"/>
                                            <Setter Property="BorderThickness" Value="3"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Border.Style>

                            <hc:Card Background="#88FFFFFF" Opacity="1.0">


                                <ScrollViewer VerticalScrollBarVisibility="Auto" Height="380">
                                    <ItemsControl x:Name="ItemsDomingo" ItemsSource="{Binding AgendamentosDomingo}">
                                        <ItemsControl.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <WrapPanel Orientation="Horizontal" />
                                            </ItemsPanelTemplate>
                                        </ItemsControl.ItemsPanel>

                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <Border Width="420"
                                                                Margin="6"
                                                                Padding="8"
                                                                CornerRadius="8"
                                                                BorderBrush="#DDD"
                                                                BorderThickness="1"
                                                                
                                                                Effect="{StaticResource DropShadow}">
                                                    <Border.InputBindings>
                                                        <MouseBinding MouseAction="LeftClick"
                                            Command="{Binding DataContext.AbrirDetalhesAgendamentoCommand,
                                            RelativeSource={RelativeSource AncestorType=Window}}"
                                            CommandParameter="{Binding}"/>
                                                    </Border.InputBindings>
                                                    <Border.Style>
                                                        <Style TargetType="Border">
                                                            <Setter Property="Background" Value="#F9F9F9"/>
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding TipoEntrega}" Value="Album">
                                                                    <!-- Azul claro suave -->
                                                                    <Setter Property="Background" Value="#DDE8F7"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding TipoEntrega}" Value="Painel">
                                                                    <!-- Lilás discreto -->
                                                                    <Setter Property="Background" Value="#EAE4F9"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding TipoEntrega}" Value="Banner">
                                                                    <!-- Amarelo pastel -->
                                                                    <Setter Property="Background" Value="#FFF6D1"/>
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </Border.Style>



                                                    <Grid>
                                                        <StackPanel Visibility="{Binding DataContext.ModoFotos,
                                                         RelativeSource={RelativeSource AncestorType=Window},
                                                         Converter={StaticResource InverseBoolToVisibilityConverter}}">
                                                            <StackPanel Orientation="Horizontal" Margin="0 0 0 0">
                                                                <TextBlock local:TextHighlight.Text="{Binding Cliente.Nome}"
                                                                            local:TextHighlight.Term="{Binding DataContext.FindTermo, RelativeSource={RelativeSource AncestorType=Window}}"
                                                                            FontWeight="Bold" FontSize="16"/>
                                                                <TextBlock Text=" | " Foreground="Gray" Margin="4,0"/>
                                                                <TextBlock local:TextHighlight.Text="{Binding Cliente.Telefone}"
                                                                            local:TextHighlight.Term="{Binding DataContext.FindTermo,
                                                                            RelativeSource={RelativeSource AncestorType=Window}}" FontSize="14"/>
                                                                <TextBlock Text=" | " Foreground="Gray" Margin="4,0"/>
                                                                <StackPanel Orientation="Horizontal" Grid.Column="1" Margin="10,0,0,0">
                                                                    <!-- Botão Confirmar -->
                                                                    <Button Style="{StaticResource BtnConfirmarStyle}"/>
                                                                    <!-- Botão Cancelar -->
                                                                    <Button Style="{StaticResource BtnCancelarStyle}"/>
                                                                </StackPanel>

                                                            </StackPanel>

                                                            <StackPanel Orientation="Horizontal" Margin="0 0 4 5">
                                                                <TextBlock Text="↳ " FontSize="16" Margin="5,-6,0,0"/>
                                                                <TextBlock Text="{Binding Crianca.Nome}" FontFamily="Arial" FontSize="14"/>
                                                                <TextBlock Text=" | " Foreground="Gray"/>
                                                                <TextBlock Text="{Binding MesversarioFormatado}" FontSize="12"/>
                                                                <TextBlock Text=" | " Foreground="Gray"/>
                                                                <TextBlock Text="{Binding Cliente.Observacao}" FontSize="12"/>
                                                            </StackPanel>

                                                            <StackPanel Orientation="Horizontal">
                                                                <TextBlock Text="{Binding Servico.Nome}" FontWeight="Bold" FontSize="13" Margin="0 0 10 4" FontFamily="Helvetica"/>
                                                                <TextBlock Text="{Binding ValorPago, StringFormat=R$ {0:N2}}" FontWeight="Bold" FontSize="13" Margin="0 0 5 0" FontFamily="Helvetica">
                                                                    <TextBlock.Style>
                                                                        <Style TargetType="TextBlock">
                                                                            <Setter Property="Foreground" Value="Red"/>
                                                                            <Style.Triggers>
                                                                                <DataTrigger Binding="{Binding EstaPago}" Value="True">
                                                                                    <Setter Property="Foreground" Value="Green"/>
                                                                                </DataTrigger>
                                                                            </Style.Triggers>
                                                                        </Style>
                                                                    </TextBlock.Style>
                                                                </TextBlock>
                                                                <TextBlock Text=" / " Foreground="Gray"/>
                                                                <TextBlock Text="{Binding Valor, StringFormat=R$ {0:N2}}" FontWeight="Bold" FontSize="13" Margin="0 0 0 4" FontFamily="Helvetica"/>
                                                            </StackPanel>

                                                            <StackPanel Orientation="Horizontal">
                                                                <TextBlock Text="{Binding Tema}" FontSize="14" Margin="0 0 6 0"/>
                                                                <TextBlock Text="{Binding Data, StringFormat=dd/MM/yyyy}" FontSize="14" Margin="0 0 6 0"/>
                                                                <TextBlock Text="{Binding Horario, StringFormat={}{0:hh\\:mm}}" FontSize="14"/>
                                                                <TextBlock Text=" | " Foreground="Gray" Margin="0,-2,0,0" FontSize="16"/>
                                                                <TextBlock Text="{Binding TipoEntrega}" Margin="2,-2,0,0" FontSize="16"/>
                                                            </StackPanel>

                                                        </StackPanel>
                                                        <!-- MODO FOTOS -->
                                                        <StackPanel Visibility="{Binding DataContext.ModoFotos,
                                                                 RelativeSource={RelativeSource AncestorType=Window},
                                                                 Converter={StaticResource BoolToVisibilityConverter}}">
                                                            <StackPanel Orientation="Horizontal" Margin="0 0 6 6">
                                                                <TextBlock local:TextHighlight.Text="{Binding Cliente.Nome}"
                                                                            local:TextHighlight.Term="{Binding DataContext.FindTermo, RelativeSource={RelativeSource AncestorType=Window}}"
                                                                            FontWeight="Bold" FontSize="16"/>
                                                                <TextBlock Text=" - " Foreground="Gray" FontSize="16" Margin="2,0"/>
                                                                <TextBlock Text="{Binding Crianca.Nome}" FontSize="16" Margin="0,0,4,0"/>
                                                                <TextBlock Text="{Binding MesversarioFormatado}" FontSize="14" Margin="0,2,0,0"/>
                                                                <TextBlock Text=" • " Foreground="Gray" FontSize="16" Margin="6,0"/>
                                                                <TextBlock Text="{Binding Tema}" FontSize="16"/>
                                                            </StackPanel>
                                                            <StackPanel Orientation="Horizontal">
                                                                <TextBlock Text="{Binding Data, StringFormat=dd/MM/yyyy}" Margin="0,0,5,10" FontSize="14"/>
                                                                <TextBlock Text=" | " Foreground="Gray" FontSize="14"/>
                                                                <TextBlock Text="{Binding TipoEntrega}" Margin="5,-2,0,10" FontSize="16"/>
                                                            </StackPanel>
                                                            <controles:EtapasFotos/>

                                                        </StackPanel>
                                                    </Grid>
                                                </Border>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </ScrollViewer>
                            </hc:Card>
                        </Border>
                    </Grid>
                </Grid>
                <controles:PopupNotificacao DataContext="{Binding NotificacaoVM}" 
                                   HorizontalAlignment="Right"
                                   VerticalAlignment="Top"/>
                <Grid Visibility="{Binding IsDetalhesOpen, Converter={StaticResource BoolToVisibilityConverter}}"
                      Panel.ZIndex="9999">
                    <!-- Fundo escurecido clicável -->
                    <Border Background="#80000000">
                        <Border.InputBindings>
                            <MouseBinding MouseAction="LeftClick"
                                  Command="{Binding FecharDetalhesCommand}"/>
                        </Border.InputBindings>
                    </Border>

                    <!-- Painel lateral direito -->
                    <Border Background="White"
                    Width="520"
                    HorizontalAlignment="Left"
                    FocusManager.IsFocusScope="True">
                        <!-- Use um UserControl para os detalhes -->
                        <controles:DetalhesAgendamento
                    DataContext="{Binding}"/>
                    </Border>
                </Grid>
                <!-- Overlay da modal de PAGAMENTOS -->
                <Grid x:Name="PagamentosOverlay"
                     Visibility="{Binding MostrarPagamentos, Converter={StaticResource BoolToVisibilityConverter}}"
                     Background="#80000000"
                     d:Visibility="Collapsed"
                     HorizontalAlignment="Stretch"
                     VerticalAlignment="Stretch"
                     Panel.ZIndex="9999"
                     IsHitTestVisible="True">
                    <Grid.InputBindings>
                        <KeyBinding Key="Escape" Command="{Binding FecharPagamentosCommand}"/>
                    </Grid.InputBindings>

                    <!-- Centro da modal -->
                    <Border HorizontalAlignment="Center"
                             VerticalAlignment="Top"
                             Background="#2F2F2F"
                             CornerRadius="12"
                             Padding="16"
                             Margin="40,20,0,0"
                             Width="1000"
                             Height="780">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>

                            <!-- Header com botão fechar -->
                            <DockPanel Grid.Row="0" LastChildFill="False">
                                <TextBlock Text="Pagamentos" Foreground="White" FontSize="18" FontWeight="Bold"/>
                                <Button Content="✕"
                       Command="{Binding FecharPagamentosCommand}"
                       DockPanel.Dock="Right"
                       Margin="8,0,0,0"
                       Width="50" Height="40"
                       Background="#E53935"
                       Foreground="White"
                       BorderThickness="0"/>

                            </DockPanel>


                            <controles:PagamentosControl Grid.Row="1"  DataContext="{Binding PagamentosVM}"/>
                        </Grid>

                    </Border>
                    <Border HorizontalAlignment="Right" Width="300"
                        Background="White"
                        Visibility="{Binding MostrarHistoricoCliente,Converter={StaticResource BoolToVisibilityConverter}}">
                        <ContentControl HorizontalContentAlignment="Right"
                           Width="300"
                           Content="{Binding TelaHistoricoCliente}"/>
                    </Border>


                </Grid>
            </Grid>
        </ScrollViewer>
    </DockPanel>
</Window>

